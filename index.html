<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>CSV 編集表示</title>
<script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
<style>
body{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",sans-serif;background:#f8f9fa;margin:0;padding:20px}
table{border-collapse:collapse;width:100%;background:#fff}
th,td{border:1px solid #ccc;padding:6px;vertical-align:top}
th{background:#f1f3f5}
</style>
</head>
<body>
<h3>CSV 編集後の表示</h3>
<div id="content">読み込み中...</div>

<script>
// ←ここを自分のCSVパスに変更
const CSV_URL = "output/autohome/135/config_135.ja.csv";

Papa.parse(CSV_URL, {
  download: true,
  header: false,
  skipEmptyLines: false,
  complete: (res) => {
    if (!res.data || !res.data.length) {
      document.getElementById("content").textContent = "CSVが空です。";
      return;
    }

    // データを行列として扱う
    let rows = res.data;

    // 1️⃣ 1列目（セクション）と3列目（項目）を削除
    rows = rows.map(row => row.filter((_, idx) => idx !== 0 && idx !== 2));

    // 2️⃣ "セクション_ja","項目_ja","nan"セルを空欄化（値一致）
    rows = rows.map((r, i) => r.map(v => {
      if (["セクション_ja", "項目_ja"].includes(v.trim())) return "";
      if (v.trim().toLowerCase() === "nan") return "";
      return v;
    }));

    // 3️⃣ HTML描画
    let html = "<table><tbody>";
    rows.forEach((r, i) => {
      html += "<tr>";
      r.forEach(cell => html += `<td>${cell || ""}</td>`);
      html += "</tr>";
    });
    html += "</tbody></table>";
    document.getElementById("content").innerHTML = html;
  },
  error: (err) => {
    document.getElementById("content").textContent = "読み込み失敗: " + err.message;
  }
});
</script>
</body>
</html>
